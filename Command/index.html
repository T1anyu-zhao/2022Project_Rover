<!DOCTYPE html>
<html lang="en">
    
    <head>
        <link rel="stylesheet" href="styles.css">
        <title>Mars Rover Command System</title>
        <meta charset="UTF-8"> <!-- character set should be UTF-8 -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- responsive web page -->
    </head>

    <body>
        <h1>Mars Rover Command System</h1>
        <!-- movement buttons, css based on styles.css, when clicked they perform the movement functions -->
        <button class = "movement forward" onclick = forward()>&#129145</button>
        <button class = "movement backward" onclick = backward()>&#129147</button>
        <button class = "movement right" onclick = right()>&#129146</button>
        <button class = "movement left" onclick = left()>&#129144</button>
        <button class = "movement stop" onclick = stop()>STOP</button>
        <button class = "automatic" onclick = automatic()>Auto</button>
        <button class = "manual" onclick = manual()>Manual</button>
        <div class = "battery" id = "time"></div>
        <div class = "map">MAP
            <div class = "aliens blue">B</div>
            <div class = "aliens fuchsia">F</div>
            <div class = "aliens green">G</div>
            <div class = "aliens red">R</div>
            <div class = "aliens teal">T</div>
            <div class = "aliens yellow">Y</div>
        </div>
        <div class = "stars"></div>
        <img src="rover.png" alt="rover" style="width:8%;height:8%;position:absolute;left:5%;top:80%;z-index: 2;">

        <script>
            function forward(){
                // when forward button is clicked, the letter F is sent to the server
                const data = 'F'
                fetch('http://146.169.212.155/insert_temp.php?temperature=10', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function backward(){
                // when backward button is clicked, the letter B is sent to the server
                const data = 'B'
                fetch('http://146.169.212.155/insert_temp.php?temperature=20', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function right(){
                // when right button is clicked, the letter R is sent to the server
                const data = 'R'
                fetch('http://146.169.212.155/insert_temp.php?temperature=40', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function left(){
                // when left button is clicked, the letter L is sent to the server
                const data = 'L'
                fetch('http://146.169.212.155/insert_temp.php?temperature=30', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function stop(){
                // when stop button is clicked, the letter S is sent to the server
                const data = 'S'
                fetch('http://146.169.212.155/insert_temp.php?temperature=50', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function automatic(){
                // when stop button is clicked, the letter S is sent to the server
                const data = 'A'
                fetch('http://146.169.212.155/insert_temp.php?temperature=60', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function manual(){
                // when stop button is clicked, the letter S is sent to the server
                const data = 'M'
                fetch('http://146.169.212.155/insert_temp.php?temperature=70', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            var mins = 231;
            document.getElementById("time").innerHTML = mins + " mins remaining";
            setInterval(time_remaining,60000);
            function time_remaining(){
                if(mins <= 0){
                    clearInterval;
                    document.getElementById("time").innerHTML = "Battery Empty!";
                }
                mins = mins - 1;
                document.getElementById("time").innerHTML = mins + " mins remaining";
            }

        </script>

    </body>

</html>
