<!DOCTYPE html>
<html lang="en">
    
    <head>
        <link rel="stylesheet" href="styles.css">
        <title>Mars Rover Command System</title>
        <meta charset="UTF-8"> <!-- character set should be UTF-8 -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- responsive web page -->
    </head>

    <body>
        <h1>Mars Rover Command System</h1>
        <!-- movement buttons, css based on styles.css, when clicked they perform the movement functions -->
        <button class = "movement forward" onclick = forward()>&#129145</button>
        <button class = "movement backward" onclick = backward()>&#129147</button>
        <button class = "movement right" onclick = right()>&#129146</button>
        <button class = "movement left" onclick = left()>&#129144</button>
        <div class = "battery" id = "time"></div>
        <div class = "map">MAP</div>
        <div class = "stars"></div>

        <script>
            function forward(){
                // when forward button is clicked, the letter F is sent to the server
                const data = 'F'
                fetch('http://localhost:8000/datastream', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function backward(){
                // when backward button is clicked, the letter B is sent to the server
                const data = 'B'
                fetch('http://localhost:8000/datastream', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function right(){
                // when right button is clicked, the letter R is sent to the server
                const data = 'R'
                fetch('http://localhost:8000/datastream', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            function left(){
                // when left button is clicked, the letter L is sent to the server
                const data = 'L'
                fetch('http://localhost:8000/datastream', {
                    method: 'POST',
                    body: JSON.stringify({ data }),
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(err => console.log(err))
            }

            var mins = 231;
            document.getElementById("time").innerHTML = mins + " mins remaining";
            setInterval(time_remaining,60000);
            function time_remaining(){
                if(mins <= 0){
                    clearInterval;
                    document.getElementById("time").innerHTML = "Battery Empty!";
                }
                mins = mins - 1;
                document.getElementById("time").innerHTML = mins + " mins remaining";
            }

        </script>

    </body>

</html>